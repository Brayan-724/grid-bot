import { Game } from "./Game";
import { Dificult, GameConfig } from "./managers";
import "./style.css";

const canvas = document.createElement("canvas");

{
  const size = Math.min(window.innerWidth, window.innerHeight);
  canvas.width = size;
  canvas.height = size;
  document.getElementById("app")!.appendChild(canvas);
}

const config = new GameConfig();
const game = new Game(canvas, config);

config.dificult = Dificult.Easy;

game.loadMap(
  `
  . # # # # # # # # # # # # # # # # # # # #
  . . . . . . . # . . . . # # # # # # # # #
  # # # # # # . . # # # . # # # # # # # # #
  # ? # # ? # . # ? ? # . # # # # # # # # #
  # . # . . # . . . . # ? # # # # # # # # #
  # . # # . . . # # # # # # # # # # # # # #
  # . . . . # . . . . # # # # # # # # # # #
  # # # # . # . # . # # # # # # # # # # # #
  # . . . . # . . . # # # # # # # # # # # #
  # . # # . # # # . # # # # # # # # # # # #
  # ? . . . # . # . # # # # # # # # # # # #
  # # # ? # . . . . # # # # # # # # # # # #
  # % . # . . # # # # # # # # # # # # # # #
  # # . # # . # . ? # # # # # # # # # # # #
  # . . . . . . . . # # # # # # # # # # # #
  # # # . # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #`
);

/*
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #
  # # # # # # # # # # # # # # # # # # # # #

  . # # # # # # # # # # # # # # # # # # # #
  . # # # # # # # # # # # # # # # # # # # #
  . # # # # # # # # # # # # # # # # # # # #
  . . . . . # # # # # # # # # # # # # # # #
  # # . # . # # # # # # # # # # # # # # # #
  # # . # . # # # # # # # # # # # # # # # #
  # . . . . # # # # # # # # # # # # # # # #
  # . # # . . . . . . # # # # # # # # # # #
  # # . . . # # # # # # # # # # # # # # # #
  # # . # . # # # # # # # # # # # # # # # #
  # . . # . # . . # # # # # # # # # # # # #
  # # . # . # # # # # # # # # # # # # # # #
  # # # # . # # # # # # # # # # # # # # # #
  # . . . . # # # # # # # # # # # # # # # #
  # # # # ? # # # # # # # # # # # # # # # #
*/

console.log(game);

async function main() {
  async function loop() {
    game.draw();
    await game.step();
    game.player.updateDraw();
    game.playerMemory.seeAround();
    requestAnimationFrame(loop);
  }

  loop();
}

main();

//@ts-ignore
window.game = game;
